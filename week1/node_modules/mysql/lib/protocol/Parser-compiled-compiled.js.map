{"version":3,"sources":["Parser-compiled.js"],"names":[],"mappings":"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","file":"Parser-compiled-compiled.js","sourcesContent":["var MAX_PACKET_LENGTH = Math.pow(2, 24) - 1;\nvar MUL_32BIT = Math.pow(2, 32);\nvar PacketHeader = require('./PacketHeader');\nvar BigNumber = require('bignumber.js');\nvar BufferList = require('./BufferList');\n\nmodule.exports = Parser;\nfunction Parser(options) {\n  options = options || {};\n\n  this._supportBigNumbers = options.config && options.config.supportBigNumbers;\n  this._buffer = new Buffer(0);\n  this._nextBuffers = new BufferList();\n  this._longPacketBuffers = new BufferList();\n  this._offset = 0;\n  this._packetEnd = null;\n  this._packetHeader = null;\n  this._packetOffset = null;\n  this._onError = options.onError || function (err) {\n    throw err;\n  };\n  this._onPacket = options.onPacket || function () {};\n  this._nextPacketNumber = 0;\n  this._encoding = 'utf-8';\n  this._paused = false;\n}\n\nParser.prototype.write = function write(chunk) {\n  this._nextBuffers.push(chunk);\n\n  while (!this._paused) {\n    if (!this._packetHeader) {\n      if (!this._combineNextBuffers(4)) {\n        break;\n      }\n\n      this._packetHeader = new PacketHeader(this.parseUnsignedNumber(3), this.parseUnsignedNumber(1));\n\n      if (this._packetHeader.number !== this._nextPacketNumber) {\n        var err = new Error('Packets out of order. Got: ' + this._packetHeader.number + ' ' + 'Expected: ' + this._nextPacketNumber);\n\n        err.code = 'PROTOCOL_PACKETS_OUT_OF_ORDER';\n        err.fatal = true;\n\n        this._onError(err);\n      }\n\n      this.incrementPacketNumber();\n    }\n\n    if (!this._combineNextBuffers(this._packetHeader.length)) {\n      break;\n    }\n\n    this._packetEnd = this._offset + this._packetHeader.length;\n    this._packetOffset = this._offset;\n\n    if (this._packetHeader.length === MAX_PACKET_LENGTH) {\n      this._longPacketBuffers.push(this._buffer.slice(this._packetOffset, this._packetEnd));\n\n      this._advanceToNextPacket();\n      continue;\n    }\n\n    this._combineLongPacketBuffers();\n\n    // Try...finally to ensure exception safety. Unfortunately this is costing\n    // us up to ~10% performance in some benchmarks.\n    var hadException = true;\n    try {\n      this._onPacket(this._packetHeader);\n      hadException = false;\n    } catch (err) {\n      if (!err || typeof err.code !== 'string' || err.code.substr(0, 7) !== 'PARSER_') {\n        throw err; // Rethrow non-MySQL errors\n      }\n\n      // Pass down parser errors\n      this._onError(err);\n      hadException = false;\n    } finally {\n      this._advanceToNextPacket();\n\n      // If we had an exception, the parser while loop will be broken out\n      // of after the finally block. So we need to make sure to re-enter it\n      // to continue parsing any bytes that may already have been received.\n      if (hadException) {\n        process.nextTick(this.write.bind(this));\n      }\n    }\n  }\n};\n\nParser.prototype.append = function append(chunk) {\n  if (!chunk || chunk.length === 0) {\n    return;\n  }\n\n  // Calculate slice ranges\n  var sliceEnd = this._buffer.length;\n  var sliceStart = this._packetOffset === null ? this._offset : this._packetOffset;\n  var sliceLength = sliceEnd - sliceStart;\n\n  // Get chunk data\n  var buffer = null;\n  var chunks = !(chunk instanceof Array || Array.isArray(chunk)) ? [chunk] : chunk;\n  var length = 0;\n  var offset = 0;\n\n  for (var i = 0; i < chunks.length; i++) {\n    length += chunks[i].length;\n  }\n\n  if (sliceLength !== 0) {\n    // Create a new Buffer\n    buffer = new Buffer(sliceLength + length);\n    offset = 0;\n\n    // Copy data slice\n    offset += this._buffer.copy(buffer, 0, sliceStart, sliceEnd);\n\n    // Copy chunks\n    for (var i = 0; i < chunks.length; i++) {\n      offset += chunks[i].copy(buffer, offset);\n    }\n  } else if (chunks.length > 1) {\n    // Create a new Buffer\n    buffer = new Buffer(length);\n    offset = 0;\n\n    // Copy chunks\n    for (var i = 0; i < chunks.length; i++) {\n      offset += chunks[i].copy(buffer, offset);\n    }\n  } else {\n    // Buffer is the only chunk\n    buffer = chunks[0];\n  }\n\n  // Adjust data-tracking pointers\n  this._buffer = buffer;\n  this._offset = this._offset - sliceStart;\n  this._packetEnd = this._packetEnd !== null ? this._packetEnd - sliceStart : null;\n  this._packetOffset = this._packetOffset !== null ? this._packetOffset - sliceStart : null;\n};\n\nParser.prototype.pause = function () {\n  this._paused = true;\n};\n\nParser.prototype.resume = function () {\n  this._paused = false;\n\n  // nextTick() to avoid entering write() multiple times within the same stack\n  // which would cause problems as write manipulates the state of the object.\n  process.nextTick(this.write.bind(this));\n};\n\nParser.prototype.peak = function () {\n  return this._buffer[this._offset];\n};\n\nParser.prototype.parseUnsignedNumber = function parseUnsignedNumber(bytes) {\n  if (bytes === 1) {\n    return this._buffer[this._offset++];\n  }\n\n  var buffer = this._buffer;\n  var offset = this._offset + bytes - 1;\n  var value = 0;\n\n  if (bytes > 4) {\n    var err = new Error('parseUnsignedNumber: Supports only up to 4 bytes');\n    err.offset = this._offset - this._packetOffset - 1;\n    err.code = 'PARSER_UNSIGNED_TOO_LONG';\n    throw err;\n  }\n\n  while (offset >= this._offset) {\n    value = (value << 8 | buffer[offset]) >>> 0;\n    offset--;\n  }\n\n  this._offset += bytes;\n\n  return value;\n};\n\nParser.prototype.parseLengthCodedString = function () {\n  var length = this.parseLengthCodedNumber();\n\n  if (length === null) {\n    return null;\n  }\n\n  return this.parseString(length);\n};\n\nParser.prototype.parseLengthCodedBuffer = function () {\n  var length = this.parseLengthCodedNumber();\n\n  if (length === null) {\n    return null;\n  }\n\n  return this.parseBuffer(length);\n};\n\nParser.prototype.parseLengthCodedNumber = function parseLengthCodedNumber() {\n  if (this._offset >= this._buffer.length) {\n    var err = new Error('Parser: read past end');\n    err.offset = this._offset - this._packetOffset;\n    err.code = 'PARSER_READ_PAST_END';\n    throw err;\n  }\n\n  var bits = this._buffer[this._offset++];\n\n  if (bits <= 250) {\n    return bits;\n  }\n\n  switch (bits) {\n    case 251:\n      return null;\n    case 252:\n      return this.parseUnsignedNumber(2);\n    case 253:\n      return this.parseUnsignedNumber(3);\n    case 254:\n      break;\n    default:\n      var err = new Error('Unexpected first byte' + (bits ? ': 0x' + bits.toString(16) : ''));\n      err.offset = this._offset - this._packetOffset - 1;\n      err.code = 'PARSER_BAD_LENGTH_BYTE';\n      throw err;\n  }\n\n  var low = this.parseUnsignedNumber(4);\n  var high = this.parseUnsignedNumber(4);\n  var value;\n\n  if (high >>> 21) {\n    value = new BigNumber(low).plus(new BigNumber(MUL_32BIT).times(high)).toString();\n\n    if (this._supportBigNumbers) {\n      return value;\n    }\n\n    var err = new Error('parseLengthCodedNumber: JS precision range exceeded, ' + 'number is >= 53 bit: \"' + value + '\"');\n    err.offset = this._offset - this._packetOffset - 8;\n    err.code = 'PARSER_JS_PRECISION_RANGE_EXCEEDED';\n    throw err;\n  }\n\n  value = low + MUL_32BIT * high;\n\n  return value;\n};\n\nParser.prototype.parseFiller = function (length) {\n  return this.parseBuffer(length);\n};\n\nParser.prototype.parseNullTerminatedBuffer = function () {\n  var end = this._nullByteOffset();\n  var value = this._buffer.slice(this._offset, end);\n  this._offset = end + 1;\n\n  return value;\n};\n\nParser.prototype.parseNullTerminatedString = function () {\n  var end = this._nullByteOffset();\n  var value = this._buffer.toString(this._encoding, this._offset, end);\n  this._offset = end + 1;\n\n  return value;\n};\n\nParser.prototype._nullByteOffset = function () {\n  var offset = this._offset;\n\n  while (this._buffer[offset] !== 0x00) {\n    offset++;\n\n    if (offset >= this._buffer.length) {\n      var err = new Error('Offset of null terminated string not found.');\n      err.offset = this._offset - this._packetOffset;\n      err.code = 'PARSER_MISSING_NULL_BYTE';\n      throw err;\n    }\n  }\n\n  return offset;\n};\n\nParser.prototype.parsePacketTerminatedString = function () {\n  var length = this._packetEnd - this._offset;\n  return this.parseString(length);\n};\n\nParser.prototype.parseBuffer = function (length) {\n  var response = new Buffer(length);\n  this._buffer.copy(response, 0, this._offset, this._offset + length);\n\n  this._offset += length;\n  return response;\n};\n\nParser.prototype.parseString = function (length) {\n  var offset = this._offset;\n  var end = offset + length;\n  var value = this._buffer.toString(this._encoding, offset, end);\n\n  this._offset = end;\n  return value;\n};\n\nParser.prototype.parseGeometryValue = function () {\n  var buffer = this.parseLengthCodedBuffer();\n  var offset = 4;\n\n  if (buffer === null || !buffer.length) {\n    return null;\n  }\n\n  function parseGeometry() {\n    var result = null;\n    var byteOrder = buffer.readUInt8(offset);offset += 1;\n    var wkbType = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset);offset += 4;\n    switch (wkbType) {\n      case 1:\n        // WKBPoint\n        var x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset);offset += 8;\n        var y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset);offset += 8;\n        result = { x: x, y: y };\n        break;\n      case 2:\n        // WKBLineString\n        var numPoints = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset);offset += 4;\n        result = [];\n        for (var i = numPoints; i > 0; i--) {\n          var x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset);offset += 8;\n          var y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset);offset += 8;\n          result.push({ x: x, y: y });\n        }\n        break;\n      case 3:\n        // WKBPolygon\n        var numRings = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset);offset += 4;\n        result = [];\n        for (var i = numRings; i > 0; i--) {\n          var numPoints = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset);offset += 4;\n          var line = [];\n          for (var j = numPoints; j > 0; j--) {\n            var x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset);offset += 8;\n            var y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset);offset += 8;\n            line.push({ x: x, y: y });\n          }\n          result.push(line);\n        }\n        break;\n      case 4: // WKBMultiPoint\n      case 5: // WKBMultiLineString\n      case 6: // WKBMultiPolygon\n      case 7:\n        // WKBGeometryCollection\n        var num = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset);offset += 4;\n        var result = [];\n        for (var i = num; i > 0; i--) {\n          result.push(parseGeometry());\n        }\n        break;\n    }\n    return result;\n  }\n  return parseGeometry();\n};\n\nParser.prototype.reachedPacketEnd = function () {\n  return this._offset === this._packetEnd;\n};\n\nParser.prototype.incrementPacketNumber = function () {\n  var currentPacketNumber = this._nextPacketNumber;\n  this._nextPacketNumber = (this._nextPacketNumber + 1) % 256;\n\n  return currentPacketNumber;\n};\n\nParser.prototype.resetPacketNumber = function () {\n  this._nextPacketNumber = 0;\n};\n\nParser.prototype.packetLength = function packetLength() {\n  if (!this._packetHeader) {\n    return null;\n  }\n\n  return this._packetHeader.length + this._longPacketBuffers.size;\n};\n\nParser.prototype._combineNextBuffers = function _combineNextBuffers(bytes) {\n  var length = this._buffer.length - this._offset;\n\n  if (length >= bytes) {\n    return true;\n  }\n\n  if (length + this._nextBuffers.size < bytes) {\n    return false;\n  }\n\n  var buffers = [];\n  var bytesNeeded = bytes - length;\n\n  while (bytesNeeded > 0) {\n    var buffer = this._nextBuffers.shift();\n    buffers.push(buffer);\n    bytesNeeded -= buffer.length;\n  }\n\n  this.append(buffers);\n  return true;\n};\n\nParser.prototype._combineLongPacketBuffers = function _combineLongPacketBuffers() {\n  if (!this._longPacketBuffers.size) {\n    return;\n  }\n\n  // Calculate bytes\n  var remainingBytes = this._buffer.length - this._offset;\n  var trailingPacketBytes = this._buffer.length - this._packetEnd;\n\n  // Create buffer\n  var buf = null;\n  var buffer = new Buffer(remainingBytes + this._longPacketBuffers.size);\n  var offset = 0;\n\n  // Copy long buffers\n  while (buf = this._longPacketBuffers.shift()) {\n    offset += buf.copy(buffer, offset);\n  }\n\n  // Copy remaining bytes\n  this._buffer.copy(buffer, offset, this._offset);\n\n  this._buffer = buffer;\n  this._offset = 0;\n  this._packetEnd = this._buffer.length - trailingPacketBytes;\n  this._packetOffset = 0;\n};\n\nParser.prototype._advanceToNextPacket = function () {\n  this._offset = this._packetEnd;\n  this._packetHeader = null;\n  this._packetEnd = null;\n  this._packetOffset = null;\n};\n\n//# sourceMappingURL=Parser-compiled.js.map"]}