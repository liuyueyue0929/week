{"version":3,"sources":["ejs.js"],"names":[],"mappings":"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","file":"ejs-compiled.js","sourcesContent":["/* jshint mocha: true */\n/* eslint-env node, mocha */\n\n/**\n * Module dependencies.\n */\n\nvar ejs = require('..');\nvar fs = require('fs');\nvar read = fs.readFileSync;\nvar assert = require('assert');\nvar path = require('path');\nvar LRU = require('lru-cache');\n\ntry {\n  fs.mkdirSync(__dirname + '/tmp');\n} catch (ex) {\n  if (ex.code !== 'EEXIST') {\n    throw ex;\n  }\n}\n\n// From https://gist.github.com/pguillory/729616\nfunction hook_stdio(stream, callback) {\n  var old_write = stream.write;\n\n  stream.write = (function() {\n    return function(string, encoding, fd) {\n      callback(string, encoding, fd);\n    };\n  })(stream.write);\n\n  return function() {\n    stream.write = old_write;\n  };\n}\n\n/**\n * Load fixture `name`.\n */\n\nfunction fixture(name) {\n  return read('test/fixtures/' + name, 'utf8');\n}\n\n/**\n * User fixtures.\n */\n\nvar users = [];\nusers.push({name: 'geddy'});\nusers.push({name: 'neil'});\nusers.push({name: 'alex'});\n\nsuite('ejs.compile(str, options)', function () {\n  test('compile to a function', function () {\n    var fn = ejs.compile('<p>yay</p>');\n    assert.equal(fn(), '<p>yay</p>');\n  });\n\n  test('empty input works', function () {\n    var fn = ejs.compile('');\n    assert.equal(fn(), '');\n  });\n\n  test('throw if there are syntax errors', function () {\n    try {\n      ejs.compile(fixture('fail.ejs'));\n    }\n    catch (err) {\n      assert.ok(err.message.indexOf('compiling ejs') > -1);\n\n      try {\n        ejs.compile(fixture('fail.ejs'), {filename: 'fail.ejs'});\n      }\n      catch (err) {\n        assert.ok(err.message.indexOf('fail.ejs') > -1);\n        return;\n      }\n    }\n    throw new Error('no error reported when there should be');\n  });\n\n  test('allow customizing delimiter local var', function () {\n    var fn;\n    fn = ejs.compile('<p><?= name ?></p>', {delimiter: '?'});\n    assert.equal(fn({name: 'geddy'}), '<p>geddy</p>');\n\n    fn = ejs.compile('<p><:= name :></p>', {delimiter: ':'});\n    assert.equal(fn({name: 'geddy'}), '<p>geddy</p>');\n\n    fn = ejs.compile('<p><$= name $></p>', {delimiter: '$'});\n    assert.equal(fn({name: 'geddy'}), '<p>geddy</p>');\n  });\n\n  test('default to using ejs.delimiter', function () {\n    var fn;\n    ejs.delimiter = '&';\n    fn = ejs.compile('<p><&= name &></p>');\n    assert.equal(fn({name: 'geddy'}), '<p>geddy</p>');\n\n    fn = ejs.compile('<p><|= name |></p>', {delimiter: '|'});\n    assert.equal(fn({name: 'geddy'}), '<p>geddy</p>');\n    delete ejs.delimiter;\n  });\n\n  test('support custom escape function', function () {\n    var customEscape;\n    var fn;\n    customEscape = function customEscape(str) {\n      return !str ? '' : str.toUpperCase();\n    };\n    fn = ejs.compile('HELLO <%= name %>', {escape: customEscape});\n    assert.equal(fn({name: 'world'}), 'HELLO WORLD');\n  });\n\n  test('strict mode works', function () {\n    assert.equal(ejs.render(fixture('strict.ejs'), {}, {strict: true}), 'true');\n  });\n\n});\n\nsuite('client mode', function () {\n\n  test('have a working client option', function () {\n    var fn;\n    var str;\n    var preFn;\n    fn = ejs.compile('<p><%= foo %></p>', {client: true});\n    str = fn.toString();\n    if (!process.env.running_under_istanbul) {\n      eval('var preFn = ' + str);\n      assert.equal(preFn({foo: 'bar'}), '<p>bar</p>');\n    }\n  });\n\n  test('support client mode without locals', function () {\n    var fn;\n    var str;\n    var preFn;\n    fn = ejs.compile('<p><%= \"foo\" %></p>', {client: true});\n    str = fn.toString();\n    if (!process.env.running_under_istanbul) {\n      eval('var preFn = ' + str);\n      assert.equal(preFn(), '<p>foo</p>');\n    }\n  });\n\n  test('not include rethrow() in client mode if compileDebug is false', function () {\n    var fn = ejs.compile('<p><%= \"foo\" %></p>', {\n      client: true,\n      compileDebug: false\n    });\n    // There could be a `rethrow` in the function declaration\n    assert((fn.toString().match(/rethrow/g) || []).length <= 1);\n  });\n\n  test('support custom escape function in client mode', function () {\n    var customEscape;\n    var fn;\n    var str;\n    customEscape = function customEscape(str) {\n      return !str ? '' : str.toUpperCase();\n    };\n    fn = ejs.compile('HELLO <%= name %>', {escape: customEscape, client: true});\n    str = fn.toString();\n    if (!process.env.running_under_istanbul) {\n      eval('var preFn = ' + str);\n      assert.equal(preFn({name: 'world'}), 'HELLO WORLD'); // eslint-disable-line no-undef\n    }\n  });\n\n  test('escape filename in errors in client mode', function () {\n    assert.throws(function () {\n      var fn = ejs.compile('<% throw new Error(\"whoops\"); %>', {client: true, filename: '<script>'});\n      fn();\n    }, /Error: &lt;script&gt;/);\n  });\n});\n\n/* Old API -- remove when this shim goes away */\nsuite('ejs.render(str, dataAndOpts)', function () {\n  test('render the template with data/opts passed together', function () {\n    assert.equal(ejs.render('<p><?= foo ?></p>', {foo: 'yay', delimiter: '?'}),\n        '<p>yay</p>');\n  });\n\n  test('disallow unsafe opts passed along in data', function () {\n    assert.equal(ejs.render('<p><?= locals.foo ?></p>',\n        // localsName should not get reset because it's blacklisted\n        {_with: false, foo: 'yay', delimiter: '?', localsName: '_'}),\n        '<p>yay</p>');\n  });\n});\n\nsuite('ejs.render(str, data, opts)', function () {\n  test('render the template', function () {\n    assert.equal(ejs.render('<p>yay</p>'), '<p>yay</p>');\n  });\n\n  test('empty input works', function () {\n    assert.equal(ejs.render(''), '');\n  });\n\n  test('undefined renders nothing escaped', function () {\n    assert.equal(ejs.render('<%= undefined %>'), '');\n  });\n\n  test('undefined renders nothing raw', function () {\n    assert.equal(ejs.render('<%- undefined %>'), '');\n  });\n\n  test('null renders nothing escaped', function () {\n    assert.equal(ejs.render('<%= null %>'), '');\n  });\n\n  test('null renders nothing raw', function () {\n    assert.equal(ejs.render('<%- null %>'), '');\n  });\n\n  test('zero-value data item renders something escaped', function () {\n    assert.equal(ejs.render('<%= 0 %>'), '0');\n  });\n\n  test('zero-value data object renders something raw', function () {\n    assert.equal(ejs.render('<%- 0 %>'), '0');\n  });\n\n  test('accept locals', function () {\n    assert.equal(ejs.render('<p><%= name %></p>', {name: 'geddy'}),\n        '<p>geddy</p>');\n  });\n\n  test('accept locals without using with() {}', function () {\n    assert.equal(ejs.render('<p><%= locals.name %></p>', {name: 'geddy'},\n                            {_with: false}),\n        '<p>geddy</p>');\n    assert.throws(function() {\n      ejs.render('<p><%= name %></p>', {name: 'geddy'},\n                 {_with: false});\n    }, /name is not defined/);\n  });\n\n  test('accept custom name for locals', function () {\n    ejs.localsName = 'it';\n    assert.equal(ejs.render('<p><%= it.name %></p>', {name: 'geddy'},\n                            {_with: false}),\n        '<p>geddy</p>');\n    assert.throws(function() {\n      ejs.render('<p><%= name %></p>', {name: 'geddy'},\n                 {_with: false});\n    }, /name is not defined/);\n    ejs.localsName = 'locals';\n  });\n\n  test('support caching', function () {\n    var file = __dirname + '/tmp/render.ejs';\n    var options = {cache: true, filename: file};\n    var out = ejs.render('<p>Old</p>', {}, options);\n    var expected = '<p>Old</p>';\n    assert.equal(out, expected);\n    // Assert no change, still in cache\n    out = ejs.render('<p>New</p>', {}, options);\n    assert.equal(out, expected);\n  });\n\n  test('support LRU caching', function () {\n    var oldCache = ejs.cache;\n    var file = __dirname + '/tmp/render.ejs';\n    var options = {cache: true, filename: file};\n    var out;\n    var expected = '<p>Old</p>';\n\n    // Switch to LRU\n    ejs.cache = LRU();\n\n    out = ejs.render('<p>Old</p>', {}, options);\n    assert.equal(out, expected);\n    // Assert no change, still in cache\n    out = ejs.render('<p>New</p>', {}, options);\n    assert.equal(out, expected);\n\n    // Restore system cache\n    ejs.cache = oldCache;\n  });\n\n  test('opts.context', function () {\n    var ctxt = {foo: 'FOO'};\n    var out = ejs.render('<%= this.foo %>', {}, {context: ctxt});\n    assert.equal(out, ctxt.foo);\n  });\n});\n\nsuite('ejs.renderFile(path, [data], [options], fn)', function () {\n  test('render a file', function(done) {\n    ejs.renderFile('test/fixtures/para.ejs', function(err, html) {\n      if (err) {\n        return done(err);\n      }\n      assert.equal(html, '<p>hey</p>\\n');\n      done();\n    });\n  });\n\n  test('accept locals', function(done) {\n    var data =  {name: 'fonebone'};\n    var options = {delimiter: '$'};\n    ejs.renderFile('test/fixtures/user.ejs', data, options, function(err, html) {\n      if (err) {\n        return done(err);\n      }\n      assert.equal(html, '<h1>fonebone</h1>\\n');\n      done();\n    });\n  });\n\n  test('accept locals without using with() {}', function(done) {\n    var data =  {name: 'fonebone'};\n    var options = {delimiter: '$', _with: false};\n    var doneCount = 0;\n    ejs.renderFile('test/fixtures/user-no-with.ejs', data, options, function(err, html) {\n      if (err) {\n        if (doneCount === 2) {\n          return;\n        }\n        doneCount = 2;\n        return done(err);\n      }\n      assert.equal(html, '<h1>fonebone</h1>\\n');\n      doneCount++;\n      if (doneCount === 2) {\n        done();\n      }\n    });\n    ejs.renderFile('test/fixtures/user.ejs', data, options, function(err) {\n      if (!err) {\n        if (doneCount === 2) {\n          return;\n        }\n        doneCount = 2;\n        return done(new Error('error not thrown'));\n      }\n      doneCount++;\n      if (doneCount === 2) {\n        done();\n      }\n    });\n  });\n\n  test('not catch err thrown by callback', function(done) {\n    var data =  {name: 'fonebone'};\n    var options = {delimiter: '$'};\n    var counter = 0;\n\n    var d = require('domain').create();\n    d.on('error', function (err) {\n      assert.equal(counter, 1);\n      assert.equal(err.message, 'Exception in callback');\n      done();\n    });\n    d.run(function () {\n      // process.nextTick() needed to work around mochajs/mocha#513\n      //\n      // tl;dr: mocha doesn't support synchronous exception throwing in\n      // domains. Have to make it async. Ticket closed because: \"domains are\n      // deprecated :D\"\n      process.nextTick(function () {\n        ejs.renderFile('test/fixtures/user.ejs', data, options, function(err) {\n          counter++;\n          if (err) {\n            assert.notEqual(err.message, 'Exception in callback');\n            return done(err);\n          }\n          throw new Error('Exception in callback');\n        });\n      });\n    });\n  });\n\n  test('support caching', function (done) {\n    var expected = '<p>Old</p>';\n    var file = __dirname + '/tmp/renderFile.ejs';\n    var options = {cache: true};\n    fs.writeFileSync(file, '<p>Old</p>');\n\n    ejs.renderFile(file, {}, options, function (err, out) {\n      if (err) {\n        done(err);\n      }\n      fs.writeFileSync(file, '<p>New</p>');\n      assert.equal(out, expected);\n\n      ejs.renderFile(file, {}, options, function (err, out) {\n        if (err) {\n          done(err);\n        }\n        // Assert no change, still in cache\n        assert.equal(out, expected);\n        done();\n      });\n    });\n  });\n\n  test('opts.context', function (done) {\n    var ctxt = {foo: 'FOO'};\n    ejs.renderFile('test/fixtures/with-context.ejs', {}, {context: ctxt}, function(err, html) {\n      if (err) {\n        return done(err);\n      }\n      assert.equal(html, ctxt.foo + '\\n');\n      done();\n    });\n\n  });\n});\n\nsuite('cache specific', function () {\n  test('`clearCache` work properly', function () {\n    var expected = '<p>Old</p>';\n    var file = __dirname + '/tmp/clearCache.ejs';\n    var options = {cache: true, filename: file};\n    var out = ejs.render('<p>Old</p>', {}, options);\n    assert.equal(out, expected);\n\n    ejs.clearCache();\n\n    expected = '<p>New</p>';\n    out = ejs.render('<p>New</p>', {}, options);\n    assert.equal(out, expected);\n  });\n\n  test('`clearCache` work properly, LRU', function () {\n    var expected = '<p>Old</p>';\n    var oldCache = ejs.cache;\n    var file = __dirname + '/tmp/clearCache.ejs';\n    var options = {cache: true, filename: file};\n    var out;\n\n    ejs.cache = LRU();\n\n    out = ejs.render('<p>Old</p>', {}, options);\n    assert.equal(out, expected);\n    ejs.clearCache();\n    expected = '<p>New</p>';\n    out = ejs.render('<p>New</p>', {}, options);\n    assert.equal(out, expected);\n\n    ejs.cache = oldCache;\n  });\n\n  test('LRU with cache-size 1', function () {\n    var oldCache = ejs.cache;\n    var options;\n    var out;\n    var expected;\n    var file;\n\n    ejs.cache = LRU(1);\n\n    file = __dirname + '/tmp/render1.ejs';\n    options = {cache: true, filename: file};\n    out = ejs.render('<p>File1</p>', {}, options);\n    expected = '<p>File1</p>';\n    assert.equal(out, expected);\n\n    // Same filename, different template, but output\n    // should be the same because cache\n    file = __dirname + '/tmp/render1.ejs';\n    options = {cache: true, filename: file};\n    out = ejs.render('<p>ChangedFile1</p>', {}, options);\n    expected = '<p>File1</p>';\n    assert.equal(out, expected);\n\n    // Different filiename -- output should be different,\n    // and previous cache-entry should be evicted\n    file = __dirname + '/tmp/render2.ejs';\n    options = {cache: true, filename: file};\n    out = ejs.render('<p>File2</p>', {}, options);\n    expected = '<p>File2</p>';\n    assert.equal(out, expected);\n\n    // Entry with first filename should now be out of cache,\n    // results should be different\n    file = __dirname + '/tmp/render1.ejs';\n    options = {cache: true, filename: file};\n    out = ejs.render('<p>ChangedFile1</p>', {}, options);\n    expected = '<p>ChangedFile1</p>';\n    assert.equal(out, expected);\n\n    ejs.cache = oldCache;\n  });\n});\n\nsuite('<%', function () {\n  test('without semicolons', function () {\n    assert.equal(ejs.render(fixture('no.semicolons.ejs')),\n        fixture('no.semicolons.html'));\n  });\n});\n\nsuite('<%=', function () {\n  test('should not throw an error with a // comment on the final line', function () {\n    assert.equal(ejs.render('<%=\\n// a comment\\nname\\n// another comment %>', {name: '&nbsp;<script>'}),\n      '&amp;nbsp;&lt;script&gt;');\n  });\n\n  test('escape &amp;<script>', function () {\n    assert.equal(ejs.render('<%= name %>', {name: '&nbsp;<script>'}),\n        '&amp;nbsp;&lt;script&gt;');\n  });\n\n  test('should escape \\'', function () {\n    assert.equal(ejs.render('<%= name %>', {name: 'The Jones\\'s'}),\n      'The Jones&#39;s');\n  });\n\n  test('should escape &foo_bar;', function () {\n    assert.equal(ejs.render('<%= name %>', {name: '&foo_bar;'}),\n      '&amp;foo_bar;');\n  });\n\n  test('should accept custom function', function() {\n\n    var customEscape = function customEscape(str) {\n      return !str ? '' : str.toUpperCase();\n    };\n\n    assert.equal(\n      ejs.render('<%= name %>', {name: 'The Jones\\'s'}, {escape: customEscape}),\n      'THE JONES\\'S'\n    );\n  });\n});\n\nsuite('<%-', function () {\n  test('should not throw an error with a // comment on the final line', function () {\n    assert.equal(ejs.render('<%-\\n// a comment\\nname\\n// another comment %>', {name: '&nbsp;<script>'}),\n        '&nbsp;<script>');\n  });\n\n  test('not escape', function () {\n    assert.equal(ejs.render('<%- name %>', {name: '<script>'}),\n        '<script>');\n  });\n\n  test('terminate gracefully if no close tag is found', function () {\n    try {\n      ejs.compile('<h1>oops</h1><%- name ->');\n      throw new Error('Expected parse failure');\n    }\n    catch (err) {\n      assert.ok(err.message.indexOf('Could not find matching close tag for') > -1);\n    }\n  });\n});\n\nsuite('%>', function () {\n  test('produce newlines', function () {\n    assert.equal(ejs.render(fixture('newlines.ejs'), {users: users}),\n      fixture('newlines.html'));\n  });\n  test('works with `-%>` interspersed', function () {\n    assert.equal(ejs.render(fixture('newlines.mixed.ejs'), {users: users}),\n      fixture('newlines.mixed.html'));\n  });\n  test('consecutive tags work', function () {\n    assert.equal(ejs.render(fixture('consecutive-tags.ejs')),\n      fixture('consecutive-tags.html'));\n  });\n});\n\nsuite('-%>', function () {\n  test('not produce newlines', function () {\n    assert.equal(ejs.render(fixture('no.newlines.ejs'), {users: users}),\n      fixture('no.newlines.html'));\n  });\n  test('stack traces work', function () {\n    try {\n      ejs.render(fixture('no.newlines.error.ejs'));\n    }\n    catch (e) {\n      if (e.message.indexOf('>> 4| <%= qdata %>') > -1) {\n        return;\n      }\n      throw e;\n    }\n    throw new Error('Expected ReferenceError');\n  });\n\n  test('works with unix style', function () {\n    var content = '<ul><% -%>\\n'\n    + '<% users.forEach(function(user){ -%>\\n'\n    + '<li><%= user.name -%></li>\\n'\n    + '<% }) -%>\\n'\n    + '</ul><% -%>\\n';\n\n    var expectedResult = '<ul><li>geddy</li>\\n<li>neil</li>\\n<li>alex</li>\\n</ul>';\n    var fn;\n    fn = ejs.compile(content);\n    assert.equal(fn({users: users}),\n      expectedResult);\n  });\n\n  test('works with windows style', function () {\n    var content = '<ul><% -%>\\r\\n'\n    + '<% users.forEach(function(user){ -%>\\r\\n'\n    + '<li><%= user.name -%></li>\\r\\n'\n    + '<% }) -%>\\r\\n'\n    + '</ul><% -%>\\r\\n';\n\n    var expectedResult = '<ul><li>geddy</li>\\r\\n<li>neil</li>\\r\\n<li>alex</li>\\r\\n</ul>';\n    var fn;\n    fn = ejs.compile(content);\n    assert.equal(fn({users: users}),\n      expectedResult);\n  });\n});\n\nsuite('<%%', function () {\n  test('produce literals', function () {\n    assert.equal(ejs.render('<%%- \"foo\" %>'),\n      '<%- \"foo\" %>');\n  });\n  test('work without an end tag', function () {\n    assert.equal(ejs.render('<%%'), '<%');\n    assert.equal(ejs.render(fixture('literal.ejs'), {}, {delimiter: ' '}),\n      fixture('literal.html'));\n  });\n});\n\nsuite('%%>', function () {\n  test('produce literal', function () {\n    assert.equal(ejs.render('%%>'),\n        '%>');\n    assert.equal(ejs.render('  >', {}, {delimiter: ' '}),\n        ' >');\n  });\n});\n\nsuite('<%_ and _%>', function () {\n  test('slurps spaces and tabs', function () {\n    assert.equal(ejs.render(fixture('space-and-tab-slurp.ejs'), {users: users}),\n      fixture('space-and-tab-slurp.html'));\n  });\n});\n\nsuite('single quotes', function () {\n  test('not mess up the constructed function', function () {\n    assert.equal(ejs.render(fixture('single-quote.ejs')),\n      fixture('single-quote.html'));\n  });\n});\n\nsuite('double quotes', function () {\n  test('not mess up the constructed function', function () {\n    assert.equal(ejs.render(fixture('double-quote.ejs')),\n      fixture('double-quote.html'));\n  });\n});\n\nsuite('backslashes', function () {\n  test('escape', function () {\n    assert.equal(ejs.render(fixture('backslash.ejs')),\n      fixture('backslash.html'));\n  });\n});\n\nsuite('messed up whitespace', function () {\n  test('work', function () {\n    assert.equal(ejs.render(fixture('messed.ejs'), {users: users}),\n      fixture('messed.html'));\n  });\n});\n\nsuite('exceptions', function () {\n  test('produce useful stack traces', function () {\n    try {\n      ejs.render(fixture('error.ejs'), {}, {filename: 'error.ejs'});\n    }\n    catch (err) {\n      assert.equal(err.path, 'error.ejs');\n      assert.equal(err.stack.split('\\n').slice(0, 8).join('\\n'), fixture('error.out'));\n      return;\n    }\n    throw new Error('no error reported when there should be');\n  });\n\n  test('not include fancy stack info if compileDebug is false', function () {\n    try {\n      ejs.render(fixture('error.ejs'), {}, {\n        filename: 'error.ejs',\n        compileDebug: false\n      });\n    }\n    catch (err) {\n      assert.ok(!err.path);\n      assert.notEqual(err.stack.split('\\n').slice(0, 8).join('\\n'), fixture('error.out'));\n      return;\n    }\n    throw new Error('no error reported when there should be');\n  });\n\n  var unhook = null;\n  test('log JS source when debug is set', function (done) {\n    var out = '';\n    var needToExit = false;\n    unhook = hook_stdio(process.stdout, function (str) {\n      out += str;\n      if (needToExit) {\n        return;\n      }\n      if (out.indexOf('__output')) {\n        needToExit = true;\n        unhook();\n        unhook = null;\n        return done();\n      }\n    });\n    ejs.render(fixture('hello-world.ejs'), {}, {debug: true});\n  });\n\n  test('escape filename in errors', function () {\n    assert.throws(function () {\n      ejs.render('<% throw new Error(\"whoops\"); %>', {}, {filename: '<script>'});\n    }, /Error: &lt;script&gt;/);\n  });\n\n  test('filename in errors uses custom escape', function () {\n    assert.throws(function () {\n      ejs.render('<% throw new Error(\"whoops\"); %>', {}, {\n        filename: '<script>',\n        escape: function () { return 'zooby'; }\n      });\n    }, /Error: zooby/);\n  });\n\n  teardown(function() {\n    if (!unhook) {\n      return;\n    }\n    unhook();\n    unhook = null;\n  });\n});\n\nsuite('rmWhitespace', function () {\n  test('works', function () {\n    assert.equal(ejs.render(fixture('rmWhitespace.ejs'), {}, {rmWhitespace: true}),\n        fixture('rmWhitespace.html'));\n  });\n});\n\nsuite('include()', function () {\n  test('include ejs', function () {\n    var file = 'test/fixtures/include-simple.ejs';\n    assert.equal(ejs.render(fixture('include-simple.ejs'), {}, {filename: file}),\n        fixture('include-simple.html'));\n  });\n\n  test('include ejs fails without `filename`', function () {\n    try {\n      ejs.render(fixture('include-simple.ejs'));\n    }\n    catch (err) {\n      assert.ok(err.message.indexOf('requires the \\'filename\\' option') > -1);\n      return;\n    }\n    throw new Error('expected inclusion error');\n  });\n\n  test('strips BOM', function () {\n    assert.equal(\n      ejs.render('<%- include(\"fixtures/includes/bom.ejs\") %>',\n        {}, {filename: path.join(__dirname, 'f.ejs')}),\n      '<p>This is a file with BOM.</p>\\n');\n  });\n\n  test('include ejs with locals', function () {\n    var file = 'test/fixtures/include.ejs';\n    assert.equal(ejs.render(fixture('include.ejs'), {pets: users}, {filename: file, delimiter: '@'}),\n        fixture('include.html'));\n  });\n\n  test('include ejs with absolute path and locals', function () {\n    var file = 'test/fixtures/include-abspath.ejs';\n    assert.equal(ejs.render(fixture('include-abspath.ejs'),\n      {dir: path.join(__dirname, 'fixtures'), pets: users, path: path},\n      {filename: file, delimiter: '@'}),\n        fixture('include.html'));\n  });\n\n  test('include ejs with set root path', function () {\n    var file = 'test/fixtures/include-root.ejs';\n    var viewsPath = path.join(__dirname, 'fixtures');\n    assert.equal(ejs.render(fixture('include-root.ejs'), {pets: users}, {filename: file, delimiter: '@',root:viewsPath}),\n      fixture('include.html'));\n  });\n\n  test('work when nested', function () {\n    var file = 'test/fixtures/menu.ejs';\n    assert.equal(ejs.render(fixture('menu.ejs'), {pets: users}, {filename: file}),\n        fixture('menu.html'));\n  });\n\n  test('work with a variable path', function () {\n    var file = 'test/fixtures/menu_var.ejs';\n    var includePath = 'includes/menu-item';\n    assert.equal(ejs.render(fixture('menu.ejs'), {pets: users, varPath:  includePath}, {filename: file}),\n      fixture('menu.html'));\n  });\n\n  test('include arbitrary files as-is', function () {\n    var file = 'test/fixtures/include.css.ejs';\n    assert.equal(ejs.render(fixture('include.css.ejs'), {pets: users}, {filename: file}),\n        fixture('include.css.html'));\n  });\n\n  test('pass compileDebug to include', function () {\n    var file = 'test/fixtures/include.ejs';\n    var fn;\n    fn = ejs.compile(fixture('include.ejs'), {\n      filename: file,\n      delimiter: '@',\n      compileDebug: false\n    });\n    try {\n      // Render without a required variable reference\n      fn({foo: 'asdf'});\n    }\n    catch(e) {\n      assert.equal(e.message, 'pets is not defined');\n      assert.ok(!e.path);\n      return;\n    }\n    throw new Error('no error reported when there should be');\n  });\n\n  test('is dynamic', function () {\n    fs.writeFileSync(__dirname + '/tmp/include.ejs', '<p>Old</p>');\n    var file = 'test/fixtures/include_cache.ejs';\n    var options = {filename: file};\n    var out = ejs.compile(fixture('include_cache.ejs'), options);\n    assert.equal(out(), '<p>Old</p>\\n');\n\n    fs.writeFileSync(__dirname + '/tmp/include.ejs', '<p>New</p>');\n    assert.equal(out(), '<p>New</p>\\n');\n  });\n\n  test('support caching', function () {\n    fs.writeFileSync(__dirname + '/tmp/include.ejs', '<p>Old</p>');\n    var file = 'test/fixtures/include_cache.ejs';\n    var options = {cache: true, filename: file};\n    var out = ejs.render(fixture('include_cache.ejs'), {}, options);\n    var expected = fixture('include_cache.html');\n    assert.equal(out, expected);\n    out = ejs.render(fixture('include_cache.ejs'), {}, options);\n    // No change, still in cache\n    assert.equal(out, expected);\n    fs.writeFileSync(__dirname + '/tmp/include.ejs', '<p>New</p>');\n    out = ejs.render(fixture('include_cache.ejs'), {}, options);\n    assert.equal(out, expected);\n  });\n\n});\n\nsuite('preprocessor include', function () {\n  test('work', function () {\n    var file = 'test/fixtures/include_preprocessor.ejs';\n    assert.equal(ejs.render(fixture('include_preprocessor.ejs'), {pets: users}, {filename: file, delimiter: '@'}),\n        fixture('include_preprocessor.html'));\n  });\n\n  test('no false positives', function () {\n    assert.equal(ejs.render('<% %> include foo <% %>'), ' include foo ');\n  });\n\n  test('fails without `filename`', function () {\n    try {\n      ejs.render(fixture('include_preprocessor.ejs'), {pets: users}, {delimiter: '@'});\n    }\n    catch (err) {\n      assert.ok(err.message.indexOf('requires the \\'filename\\' option') > -1);\n      return;\n    }\n    throw new Error('expected inclusion error');\n  });\n\n  test('strips BOM', function () {\n    assert.equal(\n      ejs.render('<% include fixtures/includes/bom.ejs %>',\n        {}, {filename: path.join(__dirname, 'f.ejs')}),\n      '<p>This is a file with BOM.</p>\\n');\n  });\n\n  test('work when nested', function () {\n    var file = 'test/fixtures/menu_preprocessor.ejs';\n    assert.equal(ejs.render(fixture('menu_preprocessor.ejs'), {pets: users}, {filename: file}),\n        fixture('menu_preprocessor.html'));\n  });\n\n  test('tracks dependency correctly', function () {\n    var file = 'test/fixtures/menu_preprocessor.ejs';\n    var fn = ejs.compile(fixture('menu_preprocessor.ejs'), {filename: file});\n    assert(fn.dependencies.length);\n  });\n\n  test('include arbitrary files as-is', function () {\n    var file = 'test/fixtures/include_preprocessor.css.ejs';\n    assert.equal(ejs.render(fixture('include_preprocessor.css.ejs'), {pets: users}, {filename: file}),\n        fixture('include_preprocessor.css.html'));\n  });\n\n  test('pass compileDebug to include', function () {\n    var file = 'test/fixtures/include_preprocessor.ejs';\n    var fn;\n    fn = ejs.compile(fixture('include_preprocessor.ejs'), {\n      filename: file,\n      delimiter: '@',\n      compileDebug: false\n    });\n    try {\n      // Render without a required variable reference\n      fn({foo: 'asdf'});\n    }\n    catch(e) {\n      assert.equal(e.message, 'pets is not defined');\n      assert.ok(!e.path);\n      return;\n    }\n    throw new Error('no error reported when there should be');\n  });\n\n  test('is static', function () {\n    fs.writeFileSync(__dirname + '/tmp/include_preprocessor.ejs', '<p>Old</p>');\n    var file = 'test/fixtures/include_preprocessor_cache.ejs';\n    var options = {filename: file};\n    var out = ejs.compile(fixture('include_preprocessor_cache.ejs'), options);\n    assert.equal(out(), '<p>Old</p>\\n');\n\n    fs.writeFileSync(__dirname + '/tmp/include_preprocessor.ejs', '<p>New</p>');\n    assert.equal(out(), '<p>Old</p>\\n');\n  });\n\n  test('support caching', function () {\n    fs.writeFileSync(__dirname + '/tmp/include_preprocessor.ejs', '<p>Old</p>');\n    var file = 'test/fixtures/include_preprocessor_cache.ejs';\n    var options = {cache: true, filename: file};\n    var out = ejs.render(fixture('include_preprocessor_cache.ejs'), {}, options);\n    var expected = fixture('include_preprocessor_cache.html');\n    assert.equal(out, expected);\n    fs.writeFileSync(__dirname + '/tmp/include_preprocessor.ejs', '<p>New</p>');\n    out = ejs.render(fixture('include_preprocessor_cache.ejs'), {}, options);\n    assert.equal(out, expected);\n  });\n\n  test('whitespace slurp and rmWhitespace work', function() {\n    var file = 'test/fixtures/include_preprocessor_line_slurp.ejs';\n    var template = fixture('include_preprocessor_line_slurp.ejs');\n    var expected = fixture('include_preprocessor_line_slurp.html');\n    var options = {rmWhitespace: true, filename: file};\n    assert.equal(ejs.render(template, {}, options),\n        expected);\n  });\n\n});\n\nsuite('comments', function () {\n  test('fully render with comments removed', function () {\n    assert.equal(ejs.render(fixture('comments.ejs')),\n        fixture('comments.html'));\n  });\n});\n\nsuite('require', function () {\n\n  // Only works with inline/preprocessor includes\n  test('allow ejs templates to be required as node modules', function () {\n    var file = 'test/fixtures/include_preprocessor.ejs';\n    var template = require(__dirname + '/fixtures/menu_preprocessor.ejs');\n    if (!process.env.running_under_istanbul) {\n      assert.equal(template({filename: file, pets: users}),\n          fixture('menu_preprocessor.html'));\n    }\n  });\n});\n\nsuite('test fileloader', function () {\n\n  var myFileLoad = function (filePath) {\n    return 'myFileLoad: ' + fs.readFileSync(filePath);\n  };\n\n  test('test custom fileload', function (done) {\n    ejs.fileLoader = myFileLoad;\n    ejs.renderFile('test/fixtures/para.ejs', function(err, html) {\n      if (err) {\n        return done(err);\n      }\n      assert.equal(html, 'myFileLoad: <p>hey</p>\\n');\n      done();\n    });\n\n  });\n});\n\nsuite('examples', function () {\n  function noop () {}\n  fs.readdirSync('examples').forEach(function (f) {\n    if (!/\\.js$/.test(f)) {\n      return;\n    }\n    suite(f, function () {\n      test('doesn\\'t throw any errors', function () {\n        var stderr = hook_stdio(process.stderr, noop);\n        var stdout = hook_stdio(process.stdout, noop);\n        try {\n          require('../examples/' + f);\n        }\n        catch (ex) {\n          stdout();\n          stderr();\n          throw ex;\n        }\n        stdout();\n        stderr();\n      });\n    });\n  });\n});\n\nsuite('meta information', function () {\n  test('has a version', function () {\n    assert.strictEqual(ejs.VERSION, require('../package.json').version);\n  });\n\n  test('had a name', function () {\n    assert.strictEqual(ejs.name, 'ejs');\n  });\n});\n"]}