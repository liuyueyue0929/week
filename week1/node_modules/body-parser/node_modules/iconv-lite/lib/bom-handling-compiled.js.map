{"version":3,"sources":["bom-handling.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAd;;AAEA,QAAQ,UAAR,GAAqB,iBAArB;AACA,SAAS,iBAAT,CAA2B,OAA3B,EAAoC,OAApC,EAA6C;AACzC,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,MAAL,GAAc,IAAd;AACH;;AAED,kBAAkB,SAAlB,CAA4B,KAA5B,GAAoC,UAAS,GAAT,EAAc;AAC9C,QAAI,KAAK,MAAT,EAAiB;AACb,cAAM,UAAU,GAAhB;AACA,aAAK,MAAL,GAAc,KAAd;AACH;;AAED,WAAO,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,CAAP;AACH,CAPD;;AASA,kBAAkB,SAAlB,CAA4B,GAA5B,GAAkC,YAAW;AACzC,WAAO,KAAK,OAAL,CAAa,GAAb,EAAP;AACH,CAFD;;AAKA;;AAEA,QAAQ,QAAR,GAAmB,eAAnB;AACA,SAAS,eAAT,CAAyB,OAAzB,EAAkC,OAAlC,EAA2C;AACvC,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,IAAL,GAAY,KAAZ;AACA,SAAK,OAAL,GAAe,WAAW,EAA1B;AACH;;AAED,gBAAgB,SAAhB,CAA0B,KAA1B,GAAkC,UAAS,GAAT,EAAc;AAC5C,QAAI,MAAM,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,CAAV;AACA,QAAI,KAAK,IAAL,IAAa,CAAC,GAAlB,EACI,OAAO,GAAP;;AAEJ,QAAI,IAAI,CAAJ,MAAW,OAAf,EAAwB;AACpB,cAAM,IAAI,KAAJ,CAAU,CAAV,CAAN;AACA,YAAI,OAAO,KAAK,OAAL,CAAa,QAApB,KAAiC,UAArC,EACI,KAAK,OAAL,CAAa,QAAb;AACP;;AAED,SAAK,IAAL,GAAY,IAAZ;AACA,WAAO,GAAP;AACH,CAbD;;AAeA,gBAAgB,SAAhB,CAA0B,GAA1B,GAAgC,YAAW;AACvC,WAAO,KAAK,OAAL,CAAa,GAAb,EAAP;AACH,CAFD","file":"bom-handling-compiled.js","sourcesContent":["\"use strict\"\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n"]}