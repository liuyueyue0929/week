{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var express = require('express');\r\nvar app=express();\r\nvar mysql=require('mysql');\r\nvar bodyparser=require('body-parser');\r\nvar url=require(\"url\");\r\napp.set('views',__dirname+'/view');\r\napp.set('view engine','ejs')\r\napp.use(express.static(__dirname+'/js'))\r\napp.use(bodyparser.urlencoded({extended:false}));\r\nvar router=express.Router();\r\n//�����ݿ⽨������\r\nvar connection=mysql.createConnection({\r\n    'host':'localhost',\r\n    'user':'root',\r\n    'password':'1',\r\n    'database':'test'\r\n})\r\nconnection.connect();\r\napp.get(\"/sel\",function(req,res){\r\n    var getid=url.parse(req.url,true).query.id;\r\n    var eyenum=0;\r\n    console.log(getid);\r\n     connection.query('select * from admin where id='+getid,function(err,result){\r\n        eyenum=result[0].eye+1;\r\n        connection.query('update admin set eye='+eyenum+' where id='+getid);\r\n         connection.query('select * from admin where id='+getid,function(err,rs){\r\n            res.end(JSON.stringify(rs));\r\n         });\r\n     });\r\n   \r\n});\r\napp.get(\"/add\",function(req,res){\r\n    var getcont=url.parse(req.url,true).query.cont;\r\n    var gettit=url.parse(req.url,true).query.tit;\r\n    console.log(getcont);\r\n     connection.query('insert into admin(title,content,eye) values(\"'+gettit+'\",\"'+getcont+'\",0)',function(err,result){\r\n        console.log(result);\r\n        res.end(JSON.stringify(result));\r\n     });\r\n     // res.end(getcont);\r\n});\r\nrouter.get('/',function(req,res){\r\n    //sql����  �������ݿ�\r\n    connection.query('select * from admin',function(err,result){\r\n        var datas=JSON.stringify(result);\r\n        var jsond=JSON.parse(datas),arr=[],idarr=[],eyearr=[];\r\n        jsond.forEach((obj,ind)=>{\r\n            arr.push(obj.title);\r\n            idarr.push(obj.id);\r\n            eyearr.push(obj.eye);\r\n        })\r\n        res.render('index',{\r\n            num:arr,\r\n            id:idarr,\r\n            eye:eyearr\r\n        })\r\n        // connection.close();\r\n    })\r\n})\r\napp.use('/',router);\r\napp.listen(8000,function(){\r\n    console.log(111)\r\n})"]}